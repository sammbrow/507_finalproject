Program written by Samantha Brown

--
HOW THIS PROGRAM WORKS

This program is intended to crawl and scrape data from the UX Design Collective's top stories page (https://uxdesign.cc) and present them in a flask table. The program gives users the ability to navigate the flask app page to see the top stories displayed along with their titles, authors, dates, urls, and descriptions (per article) in a table. Users can toggle to view a collection of the "linked phrases" within the top stories (i.e. in the body of each article, authors like to link phrases or keywords that appear in their text to their sources or other resource; this second page is mean to display these phrases and their urls for users to browse). The linked phrases table will include the phrase, phrase url, and the source article's title, author, and url.

Upon starting the Flask app, a flask page will auto-generate to show the initial page with the listing of top stories (after you've copied the URL and opened in a browser, see below for details on starting the program). NOTE: if the database and cache are not already generated, the program will take 1-10 minutes to collect data (scraping over 80 pages on the internet) and initialize the database. Please wait for these to generate.

Users can click two more buttons at the top if they'd like to see visualizations of the top 20 words mentioned in the text of all the top articles (in word cloud format) or the number of linked phrases by title (in scatterplot format). Note that these visualizations are large, so please open your browser to the full width of your computer to view all of the data.

Users have the option to search through the phrases and top articles by clicking search, which will take them to a separate search page with a flask form, then will take them to their results, starting with their keyword search results of the top stories. Here, an option pops up for users to see a visualization of their searched words and how many times those words have been searched (note that this is only available on this page, as users have to have searched terms to view this visualization), which will show in a pie chart format. Users can also toggle between their search results in the top stories database or the phrases database (toggle between tabs).

Note: visualizations are only available on the initial top stories pages for simplicity (not on the phrases tabs).



--
TO RUN THE PROGRAM

Users will need to install a virtual environment (using virtualenv) and then place all files/folders into the virtual environment. To run the program, activate your virtual environment (you can use the requirements.txt file to install all needed modules and packages) and run the app.py file

Note that if the cache and DB are not already available, again, the program will take 1-10 minutes to initialize all databases before the flask page will generate.

When you run the app.py file, the database will initialize and then the flask app will show that it has been activated. Copy the url provided in your terminal and copy into a browser (preferably safari). Then, you can begin to interact with the program in your browser.

IF, for some reason the DB does not fill, run the finalproj_main.py file in your terminal and it will initialize.



--
FILES AND FOLDERS IN THE PROGRAM
Folders:
- static - holds static files, such as the style.css
- templates - holds the html files used for the program. phraseresults.html (page that displays phrase search results), phrases.html (page that displays all phrases pulled from the database), results.html (page that displays the top story results from doing a search), search.html(page contains the form users will fill out to search for a term), top_stories.html (displays all top stories from the ux design collective's website)

Files
- app.py - connects python code to html templates for flask output
- finalproj_main.py - contains primary python code
- finalproj_test.py - test cases for python code (note that the test cases written are general enough to accommodate variations in the data depending on when the database is written)
- requirements.txt
- README.md - this file

Files auto-generated after DB initialization and visualizations are run in the flask app:
- designcol_toparticles_phrases.db - database containing all data from crawling and scraping the ux design collective's top stories page and individual articles
- finalproj_cache.json - file containing all cache data from crawling
- temp-plot.html - auto-generated by plot.ly wordcloud when this visualization is run

Files/folders initialized from running a virtual environment
- _pycache_ (this may or may not appear)
- bin
- lib
- geckodriver.log
- include



--
DATA SOURCES

The data source for this program is crawling multiple pages on the UX Design Collective's website. The program scrapes data from the top stories page (https://uxdesign.cc/top/home) as well as scrapes the content of each of the stories linked on that page. Users can access this data through the program's database generated when it is run (designcol_toparticles_phrases.db) or can look at the ux design collective's top articles page (https://uxdesign.cc/top/home) and click around on articles there.



--
CODE STRUCTURE

Primary code files:

-app.py
Main Flask file. Structured to be the liaison between python files and html templates. This file utilizes the finalproj_main file to handle python dataprocessing, retrieve data, etc and filter that data to the html pages where appropriate. Uses @app.route() to do this with Flask. Routes mostly render templates directly with three redirecting back to their original pages only to run the functions that produce plot.ly visualizations, and one redirecting back to the results page after processing the user search term.


-finalproj_main.py
Main python code file. Contains functions that:
 --develop and search cache - top_page_request_using_cache(), scrape_articles_using_cache()
 --scrape data sources for data - get_top_page_source() (gets the source code from the top page, as it is a continuous scrolling-loading page), scrape_top_page() (scrapes the top stories page and returns a list and dictionary of this data, for use in later functions), scrape_page_for_links() (scrapes an article for linked phrases), collect_for_phrases() (collects all phrases and links from each article and returns a list and dictionary of these, for use in later functions)
 --initialize and fill the database - initialize_db() and fill_db())
 --functions used to pull data from the sqlite database to fill in the flask html tables - top_stories_func(), phrases_func(), top_stories_results_func(), phrases_results_func()
 --class used to take in text from data sources and clean out common words and punctuation for analysis - text()
 --functions used to develop the plot.ly visualizations - countwords_highest(), terms_searched(), linked_phrase_scatter()


-finalproj_test.py
Main unit testing file. This file is structured to handle unit testing of the finalproj_main.py file. There are three main test cases:

 ---TestDataSources() (which tests functions related to scraping data)

 ---TestDatabaseConstruction() (which tests functions related to constructing and filling the database)

 ---TestQueries_Processing() (which tests the functions used query the database using keywords (from user input) or the functions used to query the database to pull the data needed for visualizations)
